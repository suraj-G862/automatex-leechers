{"version":3,"file":"static/js/424.17987a53.chunk.js","mappings":"sNASA,MA+IA,EA/IkBA,KAChB,MAAM,KAAEC,EAAI,aAAEC,IAAiBC,EAAAA,EAAAA,YAAWC,EAAAA,IACnCC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAQC,IAAaF,EAAAA,EAAAA,UAAS,KAErCG,EAAAA,EAAAA,YAAU,KACaC,WACnB,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,gBAAkBb,EAAKc,KACxDN,EAAUG,EAASI,KACrB,CAAE,MAAOC,GACPX,EAASW,EACX,GAEFC,GAMA,MAAO,IAJcP,WACnB,MAAMC,QAAiBC,EAAAA,EAAMC,IAAK,iBAAgBb,EAAKc,OACvDb,EAAaU,EAASI,KAAK,EAEhBG,EAAc,GAC1B,CAAClB,EAAMC,IAEV,MAgBMkB,EAAiBT,MAAOU,EAASC,EAAaC,KAClDjB,EAAS,IACT,IACE,MAAMM,QAAiBC,EAAAA,EAAMW,MAAM,UAAYH,EAAS,CACtDI,SAAUH,EACVI,GAAIL,IAENM,EAAAA,GAAMC,QAAQhB,EAASI,KAAKa,SAC5B,MAAMC,EAAetB,EAAOuB,KAAI,CAACC,EAAOC,IAClCA,IAAUC,SAASX,IACrBS,EAAMG,QAAUH,EAAMG,OACfH,GACKA,IAEhBvB,EAAUqB,EACZ,CAAE,MAAOb,GACPX,EAASW,EACX,GAGF,OACEmB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SACiB,YAAdrC,EAAKsC,MACJC,EAAAA,EAAAA,MAAA,QAAAF,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIK,UAAU,8KAA6KH,SAAC,oBAG5LF,EAAAA,EAAAA,KAAA,QAAAE,SACG9B,EAAOkC,QACNN,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACEF,EAAAA,EAAAA,KAAA,OAAKK,UAAU,oGAAmGH,UAChHE,EAAAA,EAAAA,MAAA,SAAOC,UAAU,mBAAkBH,SAAA,EACjCF,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CACVC,qBAAsB,yBACtBC,wBAAyB,mBACzBC,QAAS,CACP,QACA,aACA,OACA,WACA,UACA,aAGJV,EAAAA,EAAAA,KAAA,SAAAE,SACS,OAAN9B,QAAM,IAANA,OAAM,EAANA,EAAQuB,KAAI,CAACC,EAAOC,KACnBO,EAAAA,EAAAA,MAAA,MAAAF,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIK,UAAU,mEAAkEH,SAC7EN,EAAMA,SAETI,EAAAA,EAAAA,KAAA,MAAIK,UAAU,mEAAkEH,SAC7EN,EAAMe,cAETX,EAAAA,EAAAA,KAAA,MAAIK,UAAU,mEAAkEH,SAC7EN,EAAMgB,QAETZ,EAAAA,EAAAA,KAAA,MAAIK,UAAU,mEAAkEH,SAC7EN,EAAMiB,YAETb,EAAAA,EAAAA,KAAA,MAAIK,UAAU,mEAAkEH,SAC7EN,EAAMkB,QAAQC,QAEjBf,EAAAA,EAAAA,KAAA,MAAIK,UAAU,6DAA4DH,SACtEN,EAAMG,QAWNC,EAAAA,EAAAA,KAAA,UACEK,UAAU,iIACVW,KAAK,SACL1B,GAAIM,EAAMjB,IACVoC,KAAMlB,EACNoB,QAAUC,GAvFpB3C,WAClB,MAAMU,EAAUiC,EAAEC,cAAc7B,GAC1BO,EAAQqB,EAAEE,OAAOL,KAEjBM,EADWjD,EAAOyB,GAAOR,SACEiC,QAAQC,GAAYA,IAAY1D,EAAKc,MACtEK,EAAeC,EAASoC,EAAiBxB,EAAM,EAkFH2B,CAAYN,GAAGhB,SAChC,WAhBDF,EAAAA,EAAAA,KAAA,UACEgB,KAAK,SACL1B,GAAIM,EAAMjB,IACVoC,KAAMlB,EACNoB,QAAUC,GApFrB3C,WACjB,MAAMU,EAAUiC,EAAEC,cAAc7B,GAC1BO,EAAQqB,EAAEE,OAAOL,KACjB1B,EAAWjB,EAAOyB,GAAOR,SAC/BA,EAASoC,KAAK5D,EAAKc,KACnBK,EAAeC,EAASI,EAAUQ,EAAM,EA+EI6B,CAAWR,GAC3Bb,UAAU,oIAAmIH,SAC9I,aAxBEL,eA8CnBG,EAAAA,EAAAA,KAAC2B,EAAAA,EAAO,MAGX1D,GAAQ+B,EAAAA,EAAAA,KAAC4B,EAAAA,EAAU,CAAC3D,MAAOA,IAAY,OAG1C+B,EAAAA,EAAAA,KAAC6B,EAAAA,GAAQ,CAACC,GAAG,WAEd,C","sources":["Components/Forms/JoinPaper.js"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"../../config/api/axios\";\r\nimport UserContext from \"../../Hooks/UserContext\";\r\nimport { TableHeader } from \"../Table\";\r\nimport Loading from \"../Layouts/Loading\";\r\nimport ErrorStrip from \"../ErrorStrip\";\r\n\r\nconst JoinPaper = () => {\r\n  const { user, setPaperList } = useContext(UserContext);\r\n  const [error, setError] = useState(\"\");\r\n  const [papers, setPapers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getallPapers = async () => {\r\n      try {\r\n        const response = await axios.get(\"paper/manage/\" + user._id);\r\n        setPapers(response.data);\r\n      } catch (err) {\r\n        setError(err);\r\n      }\r\n    };\r\n    getallPapers();\r\n\r\n    const updatePapers = async () => {\r\n      const response = await axios.get(`paper/student/${user._id}`);\r\n      setPaperList(response.data);\r\n    };  \r\n    return () => updatePapers();\r\n  }, [user, setPaperList]);\r\n\r\n  const handleJoin = async (e) => {\r\n    const paperId = e.currentTarget.id;\r\n    const index = e.target.name;\r\n    const students = papers[index].students;\r\n    students.push(user._id);\r\n    updateStudents(paperId, students, index);\r\n  };\r\n\r\n  const handleLeave = async (e) => {\r\n    const paperId = e.currentTarget.id;\r\n    const index = e.target.name;\r\n    const students = papers[index].students;\r\n    const updatedStudents = students.filter((student) => student !== user._id);\r\n    updateStudents(paperId, updatedStudents, index);\r\n  };\r\n\r\n  const updateStudents = async (paperId, studentsObj, paperIndex) => {\r\n    setError(\"\");\r\n    try {\r\n      const response = await axios.patch(\"/paper/\" + paperId, {\r\n        students: studentsObj,\r\n        id: paperId,\r\n      });\r\n      toast.success(response.data.message);\r\n      const updatedPaper = papers.map((paper, index) => {\r\n        if (index === parseInt(paperIndex)) {\r\n          paper.joined = !paper.joined;\r\n          return paper;\r\n        } else return paper;\r\n      });\r\n      setPapers(updatedPaper);\r\n    } catch (err) {\r\n      setError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {user.role === \"student\" ? (\r\n        <main>\r\n          <h2 className=\"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl\">\r\n            Manage Courses\r\n          </h2>\r\n          <form>\r\n            {papers.length ? (\r\n              <>\r\n                <div className=\"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]\">\r\n                  <table className=\"w-full text-left\">\r\n                    <TableHeader\r\n                      AdditionalRowClasses={\"rounded-t-xl text-left\"}\r\n                      AdditionalHeaderClasses={'last:text-center'}\r\n                      Headers={[\r\n                        \"Paper\",\r\n                        \"Department\",\r\n                        \"Year\",\r\n                        \"Semester\",\r\n                        \"Teacher\",\r\n                        \"Manage\",\r\n                      ]}\r\n                    />\r\n                    <tbody>\r\n                      {papers?.map((paper, index) => (\r\n                        <tr key={index}>\r\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\r\n                            {paper.paper}\r\n                          </td>\r\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\r\n                            {paper.department}\r\n                          </td>\r\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\r\n                            {paper.year}\r\n                          </td>\r\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\r\n                            {paper.semester}\r\n                          </td>\r\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\r\n                            {paper.teacher.name}\r\n                          </td>\r\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 p-0\">\r\n                            {!paper.joined ? (\r\n                              <button\r\n                                type=\"button\"\r\n                                id={paper._id}\r\n                                name={index}\r\n                                onClick={(e) => handleJoin(e)}\r\n                                className=\"m-0 flex h-auto w-full justify-center bg-transparent py-3  text-lg  hover:bg-violet-900 hover:text-slate-100 dark:text-slate-100 \"\r\n                              >\r\n                                Join\r\n                              </button>\r\n                            ) : (\r\n                              <button\r\n                                className=\"m-0 flex h-auto w-full justify-center bg-transparent py-3  text-lg  hover:bg-red-600 hover:text-slate-100 dark:text-slate-100 \"\r\n                                type=\"button\"\r\n                                id={paper._id}\r\n                                name={index}\r\n                                onClick={(e) => handleLeave(e)}\r\n                              >\r\n                                Leave\r\n                              </button>\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <Loading />\r\n            )}\r\n          </form>\r\n          {error ? <ErrorStrip error={error} /> : \"\"}\r\n        </main>\r\n      ) : (\r\n        <Navigate to=\"/dash\" />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default JoinPaper;\r\n"],"names":["JoinPaper","user","setPaperList","useContext","UserContext","error","setError","useState","papers","setPapers","useEffect","async","response","axios","get","_id","data","err","getallPapers","updatePapers","updateStudents","paperId","studentsObj","paperIndex","patch","students","id","toast","success","message","updatedPaper","map","paper","index","parseInt","joined","_jsx","_Fragment","children","role","_jsxs","className","length","TableHeader","AdditionalRowClasses","AdditionalHeaderClasses","Headers","department","year","semester","teacher","name","type","onClick","e","currentTarget","target","updatedStudents","filter","student","handleLeave","push","handleJoin","Loading","ErrorStrip","Navigate","to"],"sourceRoot":""}