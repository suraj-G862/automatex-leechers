{"version":3,"file":"static/js/391.7ea51fde.chunk.js","mappings":"+MAQA,MA+RA,EA/R2BA,KACzB,MAAM,UAAEC,IAAcC,EAAAA,EAAAA,YAAWC,EAAAA,IAC1BC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAUC,IAAeF,EAAAA,EAAAA,WAAS,IAClCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,KAClCK,EAAIC,IAASN,EAAAA,EAAAA,UAAS,KACtBO,EAAOC,IAAYR,EAAAA,EAAAA,UAAS,IAE7BS,EAAgBC,UACpBN,EAAY,IACZI,EAAS,IACTG,EAAEC,iBACF,IAEE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,aAAejB,GAEhDQ,EAAMO,EAASG,KAAKC,KACpBb,EAAYS,EAASG,KAAKE,OAC1BhB,GAAY,GACZM,EAAS,GACX,CAAE,MAAOW,GAGP,GAFAX,EAASW,GAEmB,MAAxBA,EAAIN,SAASO,OAAgB,CAE/B,MACMC,SADiBP,EAAAA,EAAMC,IAAI,SAAWjB,IAClBkB,KAAKK,SAC/BA,EAASC,SAASC,IAChBC,OAAOC,OAAOF,EAAS,CACrBG,KAAM,EACNC,QAAS,EACTC,WAAY,EACZC,WAAY,EACZC,MAAO,GACP,IAEJ1B,EAAYiB,GACZnB,GAAY,EACd,CACF,GA2CI6B,EAAoBpB,IAGxB,MAAMqB,EAAQC,SAAStB,EAAEuB,OAAO7B,IAC1B8B,EAAQxB,EAAEuB,OAAOC,MACjBC,EAAMzB,EAAEuB,OAAOG,KACfC,EAAanC,EAAS6B,GAC5BM,EAAWF,GAAOD,EAClB,MAAMI,EAAcpC,EAASqC,KAAI,CAACjB,EAASS,IACrCA,IAAUrB,EAAEuB,OAAO7B,GACdiC,EACKf,IAEhBnB,EAAYmC,EAAY,EAG1B,OACEE,EAAAA,EAAAA,MAAA,QAAMC,UAAU,WAAUC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8KAA6KC,SAAC,mBAG5LC,EAAAA,EAAAA,KAAA,WAASF,UAAU,aAAYC,UAC7BF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,yCAAwCC,SAAA,EACtDF,EAAAA,EAAAA,MAAA,UACEC,UAAU,uQACVG,YAAY,eACZR,KAAK,QACLhC,GAAG,QACH8B,MAAOrC,EACPgD,UAAQ,EACRC,SAAWpC,GAAMZ,EAASY,EAAEuB,OAAOC,OAAOQ,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQI,cAAY,EAACC,QAAM,EAAAN,SAAC,iBAG3BhD,EAAU6C,KAAK1C,IACd8C,EAAAA,EAAAA,KAAA,UAAwBT,MAAOrC,EAAMmB,IAAI0B,SACtC7C,EAAMA,OADIA,EAAMmB,WAKvB2B,EAAAA,EAAAA,KAAA,UACEF,UAAU,ySACVQ,KAAK,SACLC,QAAUxC,GAAMF,EAAcE,GAAGgC,SAClC,gBAKLC,EAAAA,EAAAA,KAAA,OAAAD,SAAMpC,GAAQqC,EAAAA,EAAAA,KAACQ,EAAAA,EAAU,CAAC7C,MAAOA,IAAY,MAC7CqC,EAAAA,EAAAA,KAAA,WAASF,UAAU,iBAAgBC,UACjCF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,6BAA4BC,SAAA,CACzCxC,EAASkD,QAERT,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oGAAmGC,UAChHF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,SAAQC,SAAA,EACvBC,EAAAA,EAAAA,KAACU,EAAAA,EAAW,CACVC,wBAAyB,kBACzBC,QAAS,CACP,UACA,OACA,UACA,aACA,aACA,YAGJZ,EAAAA,EAAAA,KAAA,SAAOF,UAAU,GAAEC,SACR,OAARxC,QAAQ,IAARA,OAAQ,EAARA,EAAUqC,KAAI,CAACjB,EAASS,KACvBS,EAAAA,EAAAA,MAAA,MAEEC,UAEET,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASG,MAChBO,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASI,SAClBM,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASK,YAClBK,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASM,YACpB,GACI,qEACA,oDACLc,SAAA,EAEDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,gBAAeC,SAAEpB,EAAQc,QACvCO,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kBAAiBC,UAC7BC,EAAAA,EAAAA,KAAA,SACEF,UAAU,eACVQ,KAAK,SACLJ,UAAQ,EACRW,IAAI,IACJC,IAAI,IACJzD,SAAUA,EACVI,GAAI2B,EACJK,KAAK,OACLF,MAAOZ,EAAQG,KACfqB,SAAWpC,GAAMoB,EAAiBpB,QAGtCiC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kBAAiBC,UAC7BC,EAAAA,EAAAA,KAAA,SACEF,UAAU,eACVQ,KAAK,SACLJ,UAAQ,EACRW,IAAI,IACJC,IAAI,IACJzD,SAAUA,EACVI,GAAI2B,EACJK,KAAK,UACLF,MAAOZ,EAAQI,QACfoB,SAAWpC,GAAMoB,EAAiBpB,QAGtCiC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kBAAiBC,UAC7BC,EAAAA,EAAAA,KAAA,SACEF,UAAU,eACVQ,KAAK,SACLJ,UAAQ,EACRW,IAAI,IACJC,IAAI,IACJzD,SAAUA,EACVI,GAAI2B,EACJK,KAAK,aACLF,MAAOZ,EAAQK,WACfmB,SAAWpC,GAAMoB,EAAiBpB,QAGtCiC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kBAAiBC,UAC7BC,EAAAA,EAAAA,KAAA,SACEF,UAAU,eACVQ,KAAK,SACLJ,UAAQ,EACRW,IAAI,IACJC,IAAI,IACJzD,SAAUA,EACVI,GAAI2B,EACJK,KAAK,aACLF,MAAOZ,EAAQM,WACfkB,SAAWpC,GAAMoB,EAAiBpB,QAGtCiC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kBAAiBC,UAC7BC,EAAAA,EAAAA,KAAA,SACEF,UAAU,eACVQ,KAAK,SACLJ,UAAQ,EACRW,IAAI,IACJC,IAAI,IACJzD,UAAQ,EACRI,GAAI2B,EACJK,KAAK,QACLF,MACEF,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASG,MAClBO,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASI,SAClBM,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASK,YAClBK,SAAgB,OAAPV,QAAO,IAAPA,OAAO,EAAPA,EAASM,YAEpBkB,SAAWpC,GAAMoB,EAAiBpB,SArFjCqB,YA8Ff,GAED7B,EAASkD,QAAUpD,GAClBwC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,MAAA,UACES,KAAK,SACLR,UAAU,qSACVS,QAAUxC,GAAMT,GAAY,GAAOyC,SAAA,EAEnCC,EAAAA,EAAAA,KAACe,EAAAA,IAAM,IAAG,YAEZlB,EAAAA,EAAAA,MAAA,UACES,KAAK,SACLR,UAAU,gSACVS,QAAUxC,GAjMGD,WACzBC,EAAEC,iBACF,IACE,MAAMC,QAAiBC,EAAAA,EAAM8C,OAAO,YAAcvD,GAClDwD,EAAAA,GAAMC,QAAQjD,EAASG,KAAK+C,QAAS,CACnCC,KAAMC,IAAA,IAAC,MAAEC,EAAK,KAAEhB,GAAMe,EAAA,OAAKrB,EAAAA,EAAAA,KAACuB,EAAAA,IAAO,GAAG,IAExC/D,EAAY,GACd,CAAE,MAAOe,GACPX,EAASW,EACX,GAuL4BiD,CAAmBzD,GAAGgC,SAAA,EAEtCC,EAAAA,EAAAA,KAACuB,EAAAA,IAAO,IAAG,gBAIf,GAEDhE,EAASkD,SAAWpD,GACnBwC,EAAAA,EAAAA,MAAA,UACES,KAAK,SACLR,UAAU,0TACVS,QAAUxC,GAvOED,WACtBC,EAAEC,iBACF,MAAMM,EAAQ,CAAEb,KAAIP,QAAOoB,MAAOf,GAClC,IAEE,MAAMU,QAAiBC,EAAAA,EAAMuD,KAAK,YAAcvE,EAAOoB,GACvD2C,EAAAA,GAAMC,QAAQjD,EAASG,KAAK+C,SAC5B7D,GAAY,GACZM,EAAS,IACTC,EAAcE,EAChB,CAAE,MAAOQ,GAEP,GAA4B,MAAxBA,EAAIN,SAASO,OACf,IAEE,MAAMP,QAAiBC,EAAAA,EAAMwD,MAAM,YAAcxE,EAAOoB,GACxD2C,EAAAA,GAAMC,QAAQjD,EAASG,KAAK+C,SAC5B7D,GAAY,GACZM,EAAS,GACX,CAAE,MAAOW,GACPX,EAASW,EACX,MACKX,EAASW,EAClB,GAgN0BoD,CAAgB5D,GAAGgC,SAAA,EAEnCC,EAAAA,EAAAA,KAAC4B,EAAAA,IAAM,IAAG,WAGZ,IAEF5B,EAAAA,EAAAA,KAAA,KAAGF,UAAU,uLAAsLC,SAAC,wBAGnM,C","sources":["Components/Forms/InternalResultForm.js"],"sourcesContent":["import { useState, useContext } from \"react\";\r\nimport axios from \"../../config/api/axios\";\r\nimport UserContext from \"../../Hooks/UserContext\";\r\nimport { FaPlus, FaEdit, FaTrash } from \"react-icons/fa\";\r\nimport { toast } from \"react-toastify\";\r\nimport { TableHeader } from \"../Table\";\r\nimport ErrorStrip from \"../ErrorStrip\";\r\n\r\nconst InternalResultForm = () => {\r\n  const { paperList } = useContext(UserContext);\r\n  const [paper, setPaper] = useState(\"\");\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [internal, setInternal] = useState([]);\r\n  const [id, setId] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const fetchInternal = async (e) => {\r\n    setInternal([]);\r\n    setError(\"\");\r\n    e.preventDefault();\r\n    try {\r\n      // fetching internal record\r\n      const response = await axios.get(\"/internal/\" + paper);\r\n      // saving record id for updating/deleting record\r\n      setId(response.data._id);\r\n      setInternal(response.data.marks);\r\n      setDisabled(true);\r\n      setError(\"\");\r\n    } catch (err) {\r\n      setError(err);\r\n      // incase no record exists\r\n      if (err.response.status === 404) {\r\n        // fetching students list and mapping to add fields\r\n        const response = await axios.get(\"paper/\" + paper);\r\n        const students = response.data.students;\r\n        students.forEach((student) => {\r\n          Object.assign(student, {\r\n            test: 0,\r\n            seminar: 0,\r\n            assignment: 0,\r\n            attendance: 0,\r\n            total: 0,\r\n          });\r\n        });\r\n        setInternal(students);\r\n        setDisabled(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const addInternalMark = async (e) => {\r\n    e.preventDefault();\r\n    const marks = { id, paper, marks: internal };\r\n    try {\r\n      // adding new internal mark record\r\n      const response = await axios.post(\"internal/\" + paper, marks);\r\n      toast.success(response.data.message);\r\n      setDisabled(true);\r\n      setError(\"\");\r\n      fetchInternal(e);\r\n    } catch (err) {\r\n      // conflict, record already exists\r\n      if (err.response.status === 409) {\r\n        try {\r\n          // updating internal record\r\n          const response = await axios.patch(\"internal/\" + paper, marks);\r\n          toast.success(response.data.message);\r\n          setDisabled(true);\r\n          setError(\"\");\r\n        } catch (err) {\r\n          setError(err);\r\n        }\r\n      } else setError(err);\r\n    }\r\n  };\r\n\r\n  const deleteInternalMark = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.delete(\"internal/\" + id);\r\n      toast.success(response.data.message, {\r\n        icon: ({ theme, type }) => <FaTrash />,\r\n      });\r\n      setInternal([]);\r\n    } catch (err) {\r\n      setError(err);\r\n    }\r\n  };\r\n\r\n  // updating internal state on \"onChange\" event.\r\n  const handleFormChange = (e) => {\r\n    // the whole thing is a convoluted mess, but it works.\r\n    // if you have an alternative, DM ;).\r\n    const index = parseInt(e.target.id);\r\n    const value = e.target.value;\r\n    const key = e.target.name;\r\n    const newStudent = internal[index];\r\n    newStudent[key] = value;\r\n    const newInternal = internal.map((student, index) => {\r\n      if (index === e.target.id) {\r\n        return newStudent;\r\n      } else return student;\r\n    });\r\n    setInternal(newInternal);\r\n  };\r\n\r\n  return (\r\n    <main className=\"internal\">\r\n      <h2 className=\"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl\">\r\n        Internal Mark\r\n      </h2>\r\n      <section className=\"form__head\">\r\n        <form className=\"w-full gap-4 accent-violet-900 md:flex\">\r\n          <select\r\n            className=\"mb-4 block h-10 w-full rounded-md border-[1.5px] border-solid border-slate-400 p-1 pl-2 outline-none selection:border-slate-200 focus:border-violet-900 dark:border-slate-200 dark:caret-inherit dark:focus:border-violet-400 dark:active:border-violet-400 md:w-1/3\"\r\n            placeholder=\"select paper\"\r\n            name=\"paper\"\r\n            id=\"paper\"\r\n            value={paper}\r\n            required\r\n            onChange={(e) => setPaper(e.target.value)}\r\n          >\r\n            <option defaultValue hidden>\r\n              Select Paper\r\n            </option>\r\n            {paperList.map((paper) => (\r\n              <option key={paper._id} value={paper._id}>\r\n                {paper.paper}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <button\r\n            className=\"mb-4 h-10 w-auto rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-8 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 disabled:cursor-not-allowed dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900\"\r\n            type=\"submit\"\r\n            onClick={(e) => fetchInternal(e)}\r\n          >\r\n            Fetch\r\n          </button>\r\n        </form>\r\n      </section>\r\n      <div>{error ? <ErrorStrip error={error} /> : \"\"}</div>\r\n      <section className=\"internal__body\">\r\n        <form className=\"internal__body__form group\">\r\n          {internal.length ? (\r\n            \r\n            <div className=\"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]\">\r\n              <table className=\"w-full\">\r\n                <TableHeader\r\n                  AdditionalHeaderClasses={\"first:text-left\"}\r\n                  Headers={[\r\n                    \"Student\",\r\n                    \"Test\",\r\n                    \"Seminar\",\r\n                    \"Assignment\",\r\n                    \"Attendance\",\r\n                    \"Total\",\r\n                  ]}\r\n                />\r\n                <tbody className=\"\">\r\n                  {internal?.map((student, index) => (\r\n                    <tr\r\n                      key={index}\r\n                      className={\r\n                        // checking whether the student passed (total mark is above 12), bgcolor to represent it.\r\n                        parseInt(student?.test) +\r\n                          parseInt(student?.seminar) +\r\n                          parseInt(student?.assignment) +\r\n                          parseInt(student?.attendance) >\r\n                        12\r\n                          ? \"border-t-[1px] border-slate-400 bg-violet-900/50 first:border-none\"\r\n                          : \"border-t-[1px] border-slate-400 first:border-none\"\r\n                      }\r\n                    >\r\n                      <td className=\"p-2 text-left\">{student.name}</td>\r\n                      <td className=\"p-2 text-center\">\r\n                        <input\r\n                          className=\"w-full pl-3 \"\r\n                          type=\"number\"\r\n                          required\r\n                          min=\"0\"\r\n                          max=\"5\"\r\n                          disabled={disabled}\r\n                          id={index}\r\n                          name=\"test\"\r\n                          value={student.test}\r\n                          onChange={(e) => handleFormChange(e)}\r\n                        />\r\n                      </td>\r\n                      <td className=\"p-2 text-center\">\r\n                        <input\r\n                          className=\"w-full pl-3 \"\r\n                          type=\"number\"\r\n                          required\r\n                          min=\"0\"\r\n                          max=\"5\"\r\n                          disabled={disabled}\r\n                          id={index}\r\n                          name=\"seminar\"\r\n                          value={student.seminar}\r\n                          onChange={(e) => handleFormChange(e)}\r\n                        />\r\n                      </td>\r\n                      <td className=\"p-2 text-center\">\r\n                        <input\r\n                          className=\"w-full pl-3 \"\r\n                          type=\"number\"\r\n                          required\r\n                          min=\"0\"\r\n                          max=\"5\"\r\n                          disabled={disabled}\r\n                          id={index}\r\n                          name=\"assignment\"\r\n                          value={student.assignment}\r\n                          onChange={(e) => handleFormChange(e)}\r\n                        />\r\n                      </td>\r\n                      <td className=\"p-2 text-center\">\r\n                        <input\r\n                          className=\"w-full pl-3 \"\r\n                          type=\"number\"\r\n                          required\r\n                          min=\"0\"\r\n                          max=\"5\"\r\n                          disabled={disabled}\r\n                          id={index}\r\n                          name=\"attendance\"\r\n                          value={student.attendance}\r\n                          onChange={(e) => handleFormChange(e)}\r\n                        />\r\n                      </td>\r\n                      <td className=\"p-2 text-center\">\r\n                        <input\r\n                          className=\"w-full pl-3 \"\r\n                          type=\"number\"\r\n                          required\r\n                          min=\"0\"\r\n                          max=\"5\"\r\n                          disabled\r\n                          id={index}\r\n                          name=\"total\"\r\n                          value={\r\n                            parseInt(student?.test) +\r\n                            parseInt(student?.seminar) +\r\n                            parseInt(student?.assignment) +\r\n                            parseInt(student?.attendance)\r\n                          }\r\n                          onChange={(e) => handleFormChange(e)}\r\n                        />\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {internal.length && disabled ? (\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"mb-4 flex h-10 w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900\"\r\n                onClick={(e) => setDisabled(false)}\r\n              >\r\n                <FaEdit /> Edit\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"mb-4 flex h-10 w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-red-700 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-red-700\"\r\n                onClick={(e) => deleteInternalMark(e)}\r\n              >\r\n                <FaTrash /> Delete\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {internal.length && !disabled ? (\r\n            <button\r\n              type=\"submit\"\r\n              className=\"mb-4 flex h-10 group-invalid:hidden w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900\"\r\n              onClick={(e) => addInternalMark(e)}\r\n            >\r\n              <FaPlus /> Save\r\n            </button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <p className=\"text-balance m-2 overflow-hidden text-ellipsis whitespace-break-spaces rounded bg-red-300/50 p-1 text-center font-medium text-red-700 dark:bg-transparent group-invalid:block hidden\">invalid Data</p>\r\n        </form>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default InternalResultForm;\r\n"],"names":["InternalResultForm","paperList","useContext","UserContext","paper","setPaper","useState","disabled","setDisabled","internal","setInternal","id","setId","error","setError","fetchInternal","async","e","preventDefault","response","axios","get","data","_id","marks","err","status","students","forEach","student","Object","assign","test","seminar","assignment","attendance","total","handleFormChange","index","parseInt","target","value","key","name","newStudent","newInternal","map","_jsxs","className","children","_jsx","placeholder","required","onChange","defaultValue","hidden","type","onClick","ErrorStrip","length","TableHeader","AdditionalHeaderClasses","Headers","min","max","FaEdit","delete","toast","success","message","icon","_ref","theme","FaTrash","deleteInternalMark","post","patch","addInternalMark","FaPlus"],"sourceRoot":""}