{"version":3,"file":"static/js/948.de4944f2.chunk.js","mappings":"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","sources":["Components/Queries/StaffApproval.js"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\r\nimport UserContext from \"../../Hooks/UserContext\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport axios from \"../../config/api/axios\";\r\nimport { FaPlus, FaTrash } from \"react-icons/fa\";\r\nimport { toast } from \"react-toastify\";\r\nimport Loading from \"../Layouts/Loading\";\r\nimport ErrorStrip from \"../ErrorStrip\";\r\nimport { TableHeader } from \"../Table\";\r\n\r\nconst StaffApproval = () => {\r\n  const { user } = useContext(UserContext);\r\n  const [newStaffs, setNewStaffs] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const getNewStaffs = async () => {\r\n      try {\r\n        const response = await axios.get(\"staff/approve/\" + user.department);\r\n        setNewStaffs(response.data);\r\n      } catch (err) {\r\n        setError(err);\r\n      }\r\n    };\r\n    getNewStaffs();\r\n  }, [user]);\r\n\r\n  const handleApprove = async (e) => {\r\n    const index = e.currentTarget.id;\r\n    const staff = newStaffs[index];\r\n    staff.role = \"teacher\";\r\n    try {\r\n      const response = await axios.patch(\"/staff/\" + staff._id, {\r\n        id: staff._id,\r\n        role: staff.role,\r\n      });\r\n      newStaffs.splice(index, 1);\r\n      toast.success(response.data.message);\r\n      setError(\"\");\r\n    } catch (err) {\r\n      setError(err);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (e) => {\r\n    const staff = newStaffs[e.currentTarget.id]._id;\r\n    try {\r\n      const response = await axios.delete(\"/staff/\" + staff);\r\n      newStaffs.splice(e.currentTarget.id, 1);\r\n      toast.success(response.data.message, {\r\n        icon: ({ theme, type }) => <FaTrash />,\r\n      });\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {user.role === \"HOD\" ? (\r\n        <main className=\"staff__approval\">\r\n          <h2 className=\"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl\">\r\n            Approve Staff\r\n          </h2>\r\n          <h3 className=\"text-2xl font-semibold\">\r\n            Department: {user.department}\r\n          </h3>\r\n          <form>\r\n            {newStaffs.length ? (\r\n              <div className=\"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]  \">\r\n                <table className=\"w-full\">\r\n                  <TableHeader\r\n                    Headers={[\"Name\", \"Email\", \"Username\", \"Approve\", \"Reject\"]}\r\n                    AdditionalRowClasses={\"text-left\"}\r\n                    AdditionalHeaderClasses={\"last:text-center secondLast\"}\r\n                  />\r\n                  <tbody>\r\n                    {newStaffs?.map((staff, index) => (\r\n                      <tr key={index}>\r\n                        <td className=\"border-t-[1px] border-slate-400 p-2\">\r\n                          {staff.name}\r\n                        </td>\r\n                        <td className=\"border-t-[1px] border-slate-400 p-2\">\r\n                          {staff.email}\r\n                        </td>\r\n                        <td className=\"border-t-[1px] border-slate-400 p-2\">\r\n                          {staff.username}\r\n                        </td>\r\n                        <td className=\"border-t-[1px] border-slate-400 p-0\">\r\n                          <button\r\n                            type=\"button\"\r\n                            id={index}\r\n                            onClick={(e) => handleApprove(e)}\r\n                            className=\"m-0 flex h-auto w-full justify-center bg-transparent  py-3 text-xl duration-200 text-violet-400 hover:text-white hover:bg-violet-900 \"\r\n                          >\r\n                            <FaPlus />\r\n                          </button>\r\n                        </td>\r\n                        <td className=\"border-t-[1px] border-slate-400 p-0\">\r\n                          <button\r\n                            className=\"m-0 flex h-auto w-full justify-center bg-transparent  py-3 text-xl duration-200 text-violet-400 hover:text-white hover:bg-red-600 \"\r\n                            type=\"button\"\r\n                            id={index}\r\n                            onClick={(e) => handleDelete(e)}\r\n                          >\r\n                            <FaTrash />\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {!newStaffs.length && !error && <Loading />}\r\n          </form>\r\n          {error ? <ErrorStrip error={error} /> : \"\"}\r\n        </main>\r\n      ) : (\r\n        <Navigate to=\"/dash\" />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StaffApproval;\r\n"],"names":["StaffApproval","user","useContext","UserContext","newStaffs","setNewStaffs","useState","error","setError","useEffect","async","response","axios","get","department","data","err","getNewStaffs","_jsx","_Fragment","children","role","_jsxs","className","length","TableHeader","Headers","AdditionalRowClasses","AdditionalHeaderClasses","map","staff","index","name","email","username","type","id","onClick","e","currentTarget","patch","_id","splice","toast","success","message","handleApprove","FaPlus","delete","icon","_ref","theme","FaTrash","handleDelete","Loading","ErrorStrip","Navigate","to"],"sourceRoot":""}