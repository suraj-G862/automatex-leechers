"use strict";(self.webpackChunkIIT_Bhilai=self.webpackChunkIIT_Bhilai||[]).push([[391],{189:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(791),r=a(659),l=a(418),d=a(355),n=a(85),i=a(380),o=a(282),c=a(184);const m=()=>{const{paperList:e}=(0,s.useContext)(l.Z),[t,a]=(0,s.useState)(""),[m,u]=(0,s.useState)(!0),[p,b]=(0,s.useState)([]),[x,v]=(0,s.useState)([]),[h,g]=(0,s.useState)(""),f=async e=>{b([]),g(""),e.preventDefault();try{const e=await r.Z.get("/internal/"+t);v(e.data._id),b(e.data.marks),u(!0),g("")}catch(a){if(g(a),404===a.response.status){const e=(await r.Z.get("paper/"+t)).data.students;e.forEach((e=>{Object.assign(e,{test:0,seminar:0,assignment:0,attendance:0,total:0})})),b(e),u(!1)}}},k=e=>{const t=parseInt(e.target.id),a=e.target.value,s=e.target.name,r=p[t];r[s]=a;const l=p.map(((t,a)=>a===e.target.id?r:t));b(l)};return(0,c.jsxs)("main",{className:"internal",children:[(0,c.jsx)("h2",{className:"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl",children:"Internal Mark"}),(0,c.jsx)("section",{className:"form__head",children:(0,c.jsxs)("form",{className:"w-full gap-4 accent-violet-900 md:flex",children:[(0,c.jsxs)("select",{className:"mb-4 block h-10 w-full rounded-md border-[1.5px] border-solid border-slate-400 p-1 pl-2 outline-none selection:border-slate-200 focus:border-violet-900 dark:border-slate-200 dark:caret-inherit dark:focus:border-violet-400 dark:active:border-violet-400 md:w-1/3",placeholder:"select paper",name:"paper",id:"paper",value:t,required:!0,onChange:e=>a(e.target.value),children:[(0,c.jsx)("option",{defaultValue:!0,hidden:!0,children:"Select Paper"}),e.map((e=>(0,c.jsx)("option",{value:e._id,children:e.paper},e._id)))]}),(0,c.jsx)("button",{className:"mb-4 h-10 w-auto rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-8 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 disabled:cursor-not-allowed dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900",type:"submit",onClick:e=>f(e),children:"Fetch"})]})}),(0,c.jsx)("div",{children:h?(0,c.jsx)(o.Z,{error:h}):""}),(0,c.jsx)("section",{className:"internal__body",children:(0,c.jsxs)("form",{className:"internal__body__form group",children:[p.length?(0,c.jsx)("div",{className:"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]",children:(0,c.jsxs)("table",{className:"w-full",children:[(0,c.jsx)(i.x,{AdditionalHeaderClasses:"first:text-left",Headers:["Student","Test","Seminar","Assignment","Attendance","Total"]}),(0,c.jsx)("tbody",{className:"",children:null===p||void 0===p?void 0:p.map(((e,t)=>(0,c.jsxs)("tr",{className:parseInt(null===e||void 0===e?void 0:e.test)+parseInt(null===e||void 0===e?void 0:e.seminar)+parseInt(null===e||void 0===e?void 0:e.assignment)+parseInt(null===e||void 0===e?void 0:e.attendance)>12?"border-t-[1px] border-slate-400 bg-violet-900/50 first:border-none":"border-t-[1px] border-slate-400 first:border-none",children:[(0,c.jsx)("td",{className:"p-2 text-left",children:e.name}),(0,c.jsx)("td",{className:"p-2 text-center",children:(0,c.jsx)("input",{className:"w-full pl-3 ",type:"number",required:!0,min:"0",max:"5",disabled:m,id:t,name:"test",value:e.test,onChange:e=>k(e)})}),(0,c.jsx)("td",{className:"p-2 text-center",children:(0,c.jsx)("input",{className:"w-full pl-3 ",type:"number",required:!0,min:"0",max:"5",disabled:m,id:t,name:"seminar",value:e.seminar,onChange:e=>k(e)})}),(0,c.jsx)("td",{className:"p-2 text-center",children:(0,c.jsx)("input",{className:"w-full pl-3 ",type:"number",required:!0,min:"0",max:"5",disabled:m,id:t,name:"assignment",value:e.assignment,onChange:e=>k(e)})}),(0,c.jsx)("td",{className:"p-2 text-center",children:(0,c.jsx)("input",{className:"w-full pl-3 ",type:"number",required:!0,min:"0",max:"5",disabled:m,id:t,name:"attendance",value:e.attendance,onChange:e=>k(e)})}),(0,c.jsx)("td",{className:"p-2 text-center",children:(0,c.jsx)("input",{className:"w-full pl-3 ",type:"number",required:!0,min:"0",max:"5",disabled:!0,id:t,name:"total",value:parseInt(null===e||void 0===e?void 0:e.test)+parseInt(null===e||void 0===e?void 0:e.seminar)+parseInt(null===e||void 0===e?void 0:e.assignment)+parseInt(null===e||void 0===e?void 0:e.attendance),onChange:e=>k(e)})})]},t)))})]})}):"",p.length&&m?(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsxs)("button",{type:"submit",className:"mb-4 flex h-10 w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900",onClick:e=>u(!1),children:[(0,c.jsx)(d.fmQ,{})," Edit"]}),(0,c.jsxs)("button",{type:"submit",className:"mb-4 flex h-10 w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-red-700 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-red-700",onClick:e=>(async e=>{e.preventDefault();try{const e=await r.Z.delete("internal/"+x);n.Am.success(e.data.message,{icon:e=>{let{theme:t,type:a}=e;return(0,c.jsx)(d.Xm5,{})}}),b([])}catch(t){g(t)}})(e),children:[(0,c.jsx)(d.Xm5,{})," Delete"]})]}):"",p.length&&!m?(0,c.jsxs)("button",{type:"submit",className:"mb-4 flex h-10 group-invalid:hidden w-auto items-center gap-2 rounded-md border-[1.5px] border-solid border-violet-900 bg-slate-800 px-6 py-2 font-semibold tracking-wide text-slate-200 hover:bg-violet-900 focus:bg-violet-900 dark:border-violet-300 dark:bg-violet-900 dark:text-violet-100 dark:hover:bg-slate-900",onClick:e=>(async e=>{e.preventDefault();const a={id:x,paper:t,marks:p};try{const s=await r.Z.post("internal/"+t,a);n.Am.success(s.data.message),u(!0),g(""),f(e)}catch(s){if(409===s.response.status)try{const e=await r.Z.patch("internal/"+t,a);n.Am.success(e.data.message),u(!0),g("")}catch(s){g(s)}else g(s)}})(e),children:[(0,c.jsx)(d.wEH,{})," Save"]}):"",(0,c.jsx)("p",{className:"text-balance m-2 overflow-hidden text-ellipsis whitespace-break-spaces rounded bg-red-300/50 p-1 text-center font-medium text-red-700 dark:bg-transparent group-invalid:block hidden",children:"invalid Data"})]})})]})}}}]);
//# sourceMappingURL=391.7ea51fde.chunk.js.map